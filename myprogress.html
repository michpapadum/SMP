<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Progress</title>
  <link rel="stylesheet" href="styles.css">
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAbRnaxAm0jlT7XZLhD6-H6yu8K_DBMBXs",
      authDomain: "smp-24rgss08-32e9d.firebaseapp.com",
      databaseURL: "https://smp-24rgss08-32e9d-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "smp-24rgss08-32e9d",
      storageBucket: "smp-24rgss08-32e9d.appspot.com",
      messagingSenderId: "95759036563",
      appId: "1:95759036563:web:8303c21f7311e00c5a9d66",
      measurementId: "G-GYEMHP4RYZ"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    const db = getFirestore();

    window.onload = function() {
      onAuthStateChanged(auth, async (user) => {
        if (user) {
          const uid = user.uid;
          const userDocRef = doc(db, "users", uid);
          const userDoc = await getDoc(userDocRef);

          if (userDoc.exists()) {
            const userData = userDoc.data();
            const progress = userData.progress || [];
            displayProgress(progress);
          } else {
            document.getElementById('progress-container').innerHTML = 'No progress data available.';
          }
        } else {
          window.location.href = "login.html";
        }
      });
    };

    function displayProgress(progress) {
      const container = document.getElementById('progress-container');
      if (progress.length === 0) {
        container.innerHTML = 'No progress data available.';
        return;
      }

      let html = '<h2>Your Progress</h2>';
      progress.forEach(entry => {
        html += `<div class="progress-entry">
                   <p><strong>Game Type:</strong> ${entry.type || 'Unknown Game'}</p>
                   <p><strong>Date:</strong> ${new Date(entry.date).toLocaleDateString()}</p>
                   <p><strong>Score:</strong> ${entry.score}</p>
                 </div>`;
      });
      container.innerHTML = html;
    }
  </script>
  <style>
    body {
      font-family: Verdana, sans-serif;
      background-color: rgb(235, 209, 163);
      margin: 0;
      padding: 0;
    }
    .header {
      text-align: center;
      padding: 20px;
      background-color: rgb(235, 209, 163);
    }
    .header img {
      width: 100%;
      height: auto;
      max-height: 300px; /* Limit the height to 300px */
      object-fit: cover; /* Ensure the image covers the area if it exceeds the height */
    }
    .he1 {
      text-align: center;
      font-family: Verdana;
      font-weight: bold;
      color: white;
      font-size: 300%;
    }
    .tabdrop {
      position: relative;
      padding: 50px;
      box-sizing: border-box;
      font-family: Georgia, 'Times New Roman', Times, serif;
    }
    .tabdrop img {
      position: fixed;
      top: 60px;
      left: 5px;
      z-index: 3;
    }
    .tabdrop:hover .tabs {
      display: block;
    }
    .tabs {
      position: fixed;
      top: 60px;
      left: 5px;
      display: none;
      border: 1px solid #7794ed;
      background-color: #a1b1ff;
      width: 15%;
      max-height: 300px;
      overflow-y: auto;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      padding: 10px;
      box-sizing: border-box;
      font-family: Verdana, sans-serif;
    }
    .tabs .atab {
      color: black;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
      cursor: pointer;
      font-size: 150%;
      border-bottom: 1px solid #ddd;
    }
    .tabs .atab:hover {
      background-color: #bccdff;
    }
    #progress-container {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .progress-entry {
      margin-bottom: 20px;
    }
    .progress-entry p {
      margin: 5px 0;
    }
  </style>
</head>
<body class="ent">
  <div class="header">
    <img src="/images/handprints2.png" width="100%" height="100%">
    <text class="he1" style="padding-left:200px;">My Progress</text>
  </div>
  <div class="tabdrop">
    <img src="/images/3lines.png" width="90px" height="60px" alt="Menu">
    <div class="tabs">
      <a href="index.html" class="atab">Home</a>
      <a href="myprogress.html" class="atab">My Progress</a>
      <a href="guidebook.html" class="atab">Guidebook</a>
      <a href="exerciselib.html" class="atab">Exercise Library</a>
      <a href="uploadpg.html" class="atab">Upload Exercises</a>
    </div>
  </div>
  <div id="progress-container"></div>
</body>
</html>


